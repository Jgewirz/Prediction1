# Simple Kalshi Trading Bot Environment Configuration
# Copy this file to .env and fill in your API credentials

# =============================================================================
# KALSHI API CONFIGURATION
# =============================================================================

# Kalshi API credentials
KALSHI_API_KEY=your_kalshi_api_key_here

# Kalshi Private Key (PEM format) - IMPORTANT: Include the full PEM key with \n for line breaks
# Format: KALSHI_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEA...\n-----END RSA PRIVATE KEY-----"
# OR use a file path: KALSHI_PRIVATE_KEY_FILE=/path/to/your/private_key.pem
KALSHI_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nyour_private_key_content_here\n-----END RSA PRIVATE KEY-----"

# Environment (use demo for testing)
KALSHI_USE_DEMO=true

# =============================================================================
# OCTAGON DEEP RESEARCH API CONFIGURATION
# =============================================================================

# Octagon API credentials
OCTAGON_API_KEY=your_octagon_api_key_here
OCTAGON_BASE_URL=https://api-gateway.octagonagents.com/v1

# =============================================================================
# OPENAI API CONFIGURATION
# =============================================================================

# OpenAI API for structured betting decisions
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-5

# =============================================================================
# BOT CONFIGURATION
# =============================================================================

# Market processing limits
MAX_BET_AMOUNT=25.0

# Event analysis configuration - EXPANDED for more opportunity coverage
MAX_EVENTS_TO_ANALYZE=100     # INCREASED from 50 to 100 for broader coverage
RESEARCH_BATCH_SIZE=15        # INCREASED for faster parallel processing
SKIP_EXISTING_POSITIONS=true  # Skip betting on markets where we already have positions
MINIMUM_TIME_REMAINING_HOURS=0.5  # LOWERED to 30min for very short-term opportunities
MAX_MARKETS_PER_EVENT=20      # INCREASED from 10 to 20 for deeper event coverage
MINIMUM_ALPHA_THRESHOLD=2.0  # Minimum alpha threshold for betting (research_price / market_price must be >= this value)

# Risk management / hedging configuration
ENABLE_HEDGING=true           # Enable hedging to minimize risk and protect downside
HEDGE_RATIO=0.25              # Default hedge ratio (0.25 = hedge 25% of main bet on opposite side)
MIN_CONFIDENCE_FOR_HEDGING=0.6 # Only hedge bets with confidence below this threshold (0.6 = hedge when confidence < 60%)
MAX_HEDGE_AMOUNT=50.0         # Maximum hedge amount per bet in dollars

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================

# 1. Get Kalshi API credentials:
#    - Go to https://kalshi.com/profile/api (or demo.kalshi.co for demo)
#    - Generate API key and download private key
#    - For demo: use demo.kalshi.co with separate demo credentials
#    - For production: use api.kalshi.co with production credentials

# 2. Format your private key properly:
#    OPTION A: In .env file with \n (recommended for testing)
#    KALSHI_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEA...\n-----END RSA PRIVATE KEY-----"
#    
#    OPTION B: Use a separate file (recommended for production)
#    KALSHI_PRIVATE_KEY_FILE=kalshi_private_key.pem
#    
#    OPTION C: Multi-line format in .env (may not work with all parsers)
#    KALSHI_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----
#    MIIEpAIBAAKCAQEA...
#    -----END RSA PRIVATE KEY-----"

# 3. Get Octagon API key:
#    - Contact Octagon team for API access
#    - Replace OCTAGON_API_KEY with your actual key

# 4. Get OpenAI API key:
#    - Go to https://platform.openai.com/api-keys
#    - Create a new API key
#    - Ensure you have access to GPT-4 models

# 5. Test setup:
#    - Start with DRY_RUN=true and KALSHI_USE_DEMO=true
#    - Test with small MAX_EVENTS_TO_ANALYZE (5-10) first
#    - Only use production after thorough testing

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL - Neon)
# =============================================================================

# Database type: 'postgres' (recommended) or 'sqlite'
DB_TYPE=postgres

# PostgreSQL settings (required for postgres)
PGHOST=your-neon-host.neon.tech
PGDATABASE=neondb
PGUSER=your_db_user
PGPASSWORD=your_db_password
PGPORT=5432
PGSSLMODE=require

# SQLite settings (if using sqlite)
DB_PATH=trading_bot.db

# Database features
ENABLE_DB=true
SAVE_TO_CSV=true
DB_MIGRATE_ON_STARTUP=true
AUTO_RECONCILE=true

# =============================================================================
# RISK MANAGEMENT & KELLY SIZING (CALIBRATED FOR AGGRESSIVE OPPORTUNITY CAPTURE)
# =============================================================================

# R-score filtering (z-score threshold for placing bets)
# LOWERED from 1.5 to 0.6 to capture more profitable opportunities
Z_THRESHOLD=0.6

# Kelly criterion sizing
ENABLE_KELLY_SIZING=true
KELLY_FRACTION=0.65              # Moderate aggression for balanced growth
MAX_KELLY_BET_FRACTION=0.15      # Allow larger position sizes
BANKROLL=1000.0

# Portfolio management - EXPANDED for more diversification
MAX_PORTFOLIO_POSITIONS=35       # Increased from 10 to 35
PORTFOLIO_SELECTION_METHOD=top_r_scores

# Daily loss limits (kill switch)
MAX_DAILY_LOSS=100.0
MAX_DAILY_LOSS_PCT=0.10
ENABLE_KILL_SWITCH=true
MAX_TOTAL_EXPOSURE=500.0

# =============================================================================
# EARLY ENTRY STRATEGY (kalshi.com/?live=new&liveEventType=unique behavior)
# =============================================================================

EARLY_ENTRY_ENABLED=true
EARLY_ENTRY_MAX_AGE_HOURS=72.0     # Markets up to 72h old (was 48h)
EARLY_ENTRY_MIN_TIME_HOURS=6.0    # Capture short-term opportunities (was 24h)
EARLY_ENTRY_MAX_VOLUME=75000      # Include moderately liquid markets (was 10k)

# Scoring weights (must sum to 1.0) - prioritize short-term resolution
EARLY_ENTRY_RECENCY_WEIGHT=0.35   # Favor newer markets
EARLY_ENTRY_VOLUME_WEIGHT=0.25    # Slightly favor lower volume (less efficient)
EARLY_ENTRY_TIME_WEIGHT=0.40      # PRIORITIZE short-term markets for faster turnover

# =============================================================================
# TRENDRADAR NEWS INTELLIGENCE (Optional)
# =============================================================================

TRENDRADAR_ENABLED=true
TRENDRADAR_URL=http://localhost:3333
TRENDRADAR_TIMEOUT=10.0
TRENDRADAR_MAX_RETRIES=2
TRENDRADAR_CIRCUIT_THRESHOLD=3

# =============================================================================
# STOP-LOSS / TAKE-PROFIT (Optional)
# =============================================================================

SL_TP_ENABLED=true
DEFAULT_STOP_LOSS_PCT=0.15
DEFAULT_TAKE_PROFIT_PCT=0.30
TRAILING_STOP_ENABLED=false
TRAILING_STOP_PCT=0.10

# =============================================================================
# RECOMMENDED TESTING FLOW
# =============================================================================

# Phase 1: Demo + Dry Run
# KALSHI_USE_DEMO=true, DRY_RUN=true, MAX_EVENTS_TO_ANALYZE=5

# Phase 2: Demo + Live Trading
# KALSHI_USE_DEMO=true, DRY_RUN=false, MAX_EVENTS_TO_ANALYZE=10

# Phase 3: Production + Live Trading
# KALSHI_USE_DEMO=false, DRY_RUN=false, MAX_EVENTS_TO_ANALYZE=50